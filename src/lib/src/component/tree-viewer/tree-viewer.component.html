<div class="tree-view" *ngIf="model">
  <div class="tree-view-item">
    <div class="tree-view-item-key" (click)="onClick()" (dblclick)="onDoubleClick()" [style.padding-left]="level * 12 + 'px'"
      [ngClass]="{
        'active': model.path === uiState.activeEditorPath,
        'dirty': uiState.isDirty(model.path),
        'header': level == 0,
        'selected': model.path === uiState.selectedElement?.path
      }">
      <span class="icon-type glyphicon" [ngClass]="{
        'glyphicon-question-sign': isUnknown(),
        'glyphicon-folder-close': isEmptyFolder(),
        'glyphicon-chevron-down': isFolderExpanded(),
        'glyphicon-chevron-right': isFolderFolded(),
        'glyphicon-file': isFile(),
        'glyphicon-picture': isImage()
      }" (click)="onIconClick()">
      </span> {{model.name}}
      <span class="right-align">
        <span id="test-state-running" [ngClass]="{
          'fa-spinner fa-spin': isRunning(),
          'fa fa-fw': true}"></span>
        <span *ngIf="level != 0" class="icon-delete glyphicon glyphicon-remove" (click)="onDeleteIconClick()"></span>
      </span>
    </div>
    <div *ngIf="confirmDelete" class="alert alert-warning confirm-delete">
      Are you sure you want to delete '{{model.name}}'?<br/>
      <a href="#" class="alert-link delete-cancel" (click)="onDeleteCancel()">No</a>
      <a href="#" class="alert-link delete-confirm" (click)="onDeleteConfirm()">Yes</a>
    </div>
    <div *ngIf="errorMessage" class="alert alert-danger">{{errorMessage}}</div>
  </div>
  <div *ngIf="shouldShowNewElement()" [style.padding-left]="level * 12 + 'px'">
    <nav-new-element [uiState]="uiState"></nav-new-element>
  </div>
  <div *ngIf="isExpanded()">
    <div *ngFor="let child of model.children">
      <nav-tree-viewer [model]="child" [uiState]="uiState" [level]="level + 1"></nav-tree-viewer>
    </div>
  </div>
</div>
